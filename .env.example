# =============================================================================
# SFPLiberate Docker Configuration
# =============================================================================
# Copy this file to .env and customize for your environment
# Usage: docker-compose up

# =============================================================================
# Build Configuration
# =============================================================================

# Python version (backend)
PYTHON_VERSION=3.11

# Poetry version (dependency management)
POETRY_VERSION=1.8.5

# Next.js frontend
# Deployment mode is determined at build time in next.config.ts (defaults to 'standalone').
# Client-side feature flags can be set via environment variables on the container.
# See docs/NEXTJS_REWRITE_SUMMARY.md for details.

# Build metadata (auto-generated in CI, optional locally)
BUILD_DATE=
VCS_REF=
VERSION=dev

# =============================================================================
# Application Configuration
# =============================================================================

# Environment mode: development, staging, production
ENVIRONMENT=production

# Logging level: debug, info, warning, error, critical
LOG_LEVEL=info

# =============================================================================
# Network Configuration
# =============================================================================

# Host port to expose the application
# Access the app at http://localhost:HOST_PORT
HOST_PORT=8080

# Domain name (used for Traefik/Let's Encrypt in production)
DOMAIN=localhost

# =============================================================================
# Data Storage
# =============================================================================

# Path on host for persistent data (SQLite database, submissions)
# Relative path: ./data (creates in project directory)
# Absolute path: /var/lib/sfpliberate/data
DATA_PATH=./data

# =============================================================================
# BLE Proxy Configuration (Optional)
# =============================================================================

## Frontend (client) feature flags (optional)
# NEXT_PUBLIC_DEPLOYMENT_MODE=standalone
# NEXT_PUBLIC_API_URL=/api
# NEXT_PUBLIC_ENABLE_BLE_PROXY=true
# NEXT_PUBLIC_ENABLE_WEB_BLUETOOTH=true
# NEXT_PUBLIC_ENABLE_COMMUNITY_FEATURES=false

# Enable BLE proxy mode for iOS/Safari support
# Requires Bluetooth adapter access on host
# Usage: docker-compose --profile ble-proxy up
BLE_PROXY_ENABLED=false
# Default proxy discovery timeout (seconds)
BLE_PROXY_DEFAULT_TIMEOUT=5
# Default adapter for proxy (optional; e.g., hci0). Leave empty for system default
BLE_PROXY_ADAPTER=

# Optional: Public mode (hide proxy UI by default)
PUBLIC_MODE=false

# Optional: Default SFP profile (self-hosted convenience; restart needed)
# If set, frontend will auto-use these as the initial profile.
SFP_SERVICE_UUID=
SFP_WRITE_CHAR_UUID=
SFP_NOTIFY_CHAR_UUID=

# =============================================================================
# Development Overrides
# =============================================================================
# These are automatically applied when using docker-compose.override.yml
# Uncomment to force development settings:

# ENVIRONMENT=development
# LOG_LEVEL=debug

# =============================================================================
# Advanced Configuration (Optional)
# =============================================================================

# Database file path (inside container)
# Default: /app/data/sfp_library.db
# DATABASE_FILE=/app/data/sfp_library.db

# Submissions directory (inside container)
# Default: /app/data/submissions
# SUBMISSIONS_DIR=/app/data/submissions

# =============================================================================
# Docker Build Cache (CI/CD)
# =============================================================================
# Registry for BuildKit cache (used in CI for faster builds)
# CACHE_REGISTRY=ghcr.io/josiah-nelson/sfpliberate
